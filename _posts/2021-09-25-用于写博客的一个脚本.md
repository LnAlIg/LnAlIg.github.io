---
title: 用于写博客的一个脚本
date: 2021-09-25 10:08
categories: bash scritp
---
为了能够自动化的生成博客文章前面的front-matter部分,我就简单写了一个bash脚本,利用vim来自动生成.或许,这里应该使用vim的一些相关配置或者插件会更简单,但是很明显,我不会.

```bash
#! /bin/sh

date=`date +%G-%m-%d`

if [ $# -gt 0 ]; then
	name=${PWD}/${date}-${1}
	temp=${name}.temp
	if [ -e "$name" ]; then 
		vim $name
		exit 1
	else
		echo -e "---\ntitle: ${1%.*}\ndate: `date +%Y-%m-%d\ %R`" > ${temp}
		if [ $# -eq 2 ]; then
			echo -e "category: ${2}" >> ${temp}
		elif [ $# -gt 2 ]; then
			All=${@}
			echo -e "categories: ${All#*\ }" >> $temp
		fi
		echo "---" >> $temp
		vim -c "0r ${temp}" + --not-a-term $name
		rm $temp
	fi
else
	echo '这里至少需要一个文件名'
	exit 1
fi
```

vim的命令上,我最开始使用的是`--cmd`,但是这样导致的结果是,vim每次开始都会弹出一个read命令的提示.我没法解决.
最后,在vim里面看到`-c`和`--cmd`有区别,前者是在配置文件后面使用;后者是在配置文件加载后执行的.然后我看到的区别是`-c`不会有提醒,`--cmd`会有提醒.
